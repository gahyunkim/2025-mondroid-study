# Q) 8. Fragment 생명주기를 설명해주세요

## Fragment의 생명주기란?

Fragment는 액티비티 생명주기와 함께 움직이고, 화면 일부를 유연하게 관리할 수 있는 기능이다.

Fragment의 생명주기는 크게 Fragment의 자체 생명주기와 View의 생명주기를 가지고 두가지로 나누어서 이해해야 한다.

- 액티비티의 특징 일부를 물려받은 독자적인 생명주기를 가지는 UI 컴포넌트
- Fragment의 생명주기는 Activity가 활성화된 상태에서 작동한다.

### Fragment의 특징

- 프래그먼트는 앱의 UI 재사용이 가능한 부분을 의미한다.
- 프래그먼트는 액티비티와 마찬가지로 자체적으로 레이아웃을 정의 및 관리하고 자체생명주기를 가지고 자체적으로 이벤트를 처리할 수 있다.
- 프래그먼트는 단독으로 존재할 수 없고, 액티비티 혹은 다른 프래그먼트에 의해 호스팅되어야한다.
- 프래그먼트의 뷰계층은 host의 view 계층의 일부가 되거나 이 계층에 연결이 된다.

### Fragment 생명주기 흐름
<img width="821" height="1004" alt="image" src="https://github.com/user-attachments/assets/80a8d652-74b8-4ff0-81dd-3d20c80ddc56" />


onAttach() → onCreate() → onCreateView() → onViewCreated() → onStart() → onResume() → onPause() → onStop() → onDestroyView() → onDestroy()

### onAttach()

- 프래그먼트가 액티비티 위에 붙을 때 호출된다.
- 아직 프래그먼트가 생성된 상태는 아니지만 인자로 context가 주어진다

### onCreate()

- 액티비티와 마찬가지로 최초로 초기화해야하는 리소스들을 여기서 초기화한다.
- 여기서 UI는 초기화할 수 없고, 다음에 오는 onCreateView()에서 할 수 있다.
- 본격적으로 프래그먼트가 액티비티에 호출을 받아 생성되는 시점이다.
- Activity의 onCreate() 함수와 유사한 역할을 수행한다.
- onCreate()에서 뷰가 초기화되고 있기 때문에 충돌할 가능성이 있어서 UI와 관련된 작업들은 수행이 불가능하다.
- 뷰가 아직 다 만들어지지 않았기 때문에 findViewById()를 사용할 수 없음

### onCreateView()

- 레이아웃을 inflate하는 곳이다.
- View의 객체를 얻을 수 있고, 버튼이나 텍스트 뷰등을 초기화할 수 있는 UI를 다룰 수 있는 곳이다.
- fragment에서 UI를 그릴 때 호출되는 콜백이다.
- Activity의 onCreate() 기능을 Fragment에서는 onCreate(), onCreateView() 두가지로 분리한 것이다.
- 주로 binding = FragmentExampleBinding.inflate(inflater, container, false) 형태로 자주 처리한다.

### onViewCreated()

- 프래그먼트에서 onCreateView를 마치고 뷰가 완전히 생성된 직후에 호출된다.
- 뷰에 대한 로직을 초기화 Adapter 연결, LiveData 관찰 등을 여기서 진행한다.
- view에 대한 접근이 보장되므로 대부분의 UI 연결을 여기서 진행한다.

### onStart()

- Activity와 마찬가지로 이 시점부터 사용자가 액티비티를 볼 수 있다.
- UI 초기화가 끝나고 Fragment가 활성 준비 상태가 되었을 떄

### onResume()

- Fragment가 활성화 된 상태로 간주한다.
- 사용자가 상호작용이 가능한 상태를 의미한다.
- 애니메이션 시작, 위치 업데이트 등 UI 중신 로직을 수행한다.

### onPause()

- Fragment의 호스트 Activity가 포커스를 잃고 다른 액티비티가 최상단에 보여지는 경우에 호출되는 함수이다.
- 실행중인 애니메이션 정지, 리소스 해제등을 실행한다.
- 카메라, 센서, MediaPlayer등은 여기서 release한다.

### onStop()

- onPause() 상태 + Activity가 완전히 보이지 않는 경우에 호출된다.
- 화면에 보이지 않을 때 실행할 필요가 없는 기능들을 모두 정지 가능하다.
- 네트워크 연결 종료, DB 연결 닫기 등 리소스 정리를 한다.

### onDestroyView()

- Fragment에 구현된 View가 제거되는 단계이다.
- ViewBinding등 UI 관련 참조를 제거한다.
- 메모리 누수를 방지하기 위해 binding = null 처리를 한다.

### onDestroy()

- Fragment를 완전히 제거하기 직전이다.

### onDetach()

- fragment가 제거되고 Activity로부터 해제될 때 호출한다.
