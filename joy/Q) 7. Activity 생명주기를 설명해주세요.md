# Q) 7. Activity 생명주기를 설명해주세요

## Activity의 생명주기란?

https://developer.android.com/guide/components/activities/activity-lifecycle?hl=ko

### Activity 생명주기 순서
<img width="513" height="663" alt="image" src="https://github.com/user-attachments/assets/fec75865-b837-4ef2-b36d-06478d5184bb" />

onCreate() → onStart() → onResume() → onPause() → onStop() → onDestroy()

### 생명주기를 알아야하는 이유

- 리소스를 적절히 관리하기 위해서
    - onPause(), onStop()에서 카메라, 센서, 위치추적 등을 해제하지 않으면 배터리 소모나 메모리 누수가 발생할 수 있다.
- 데이터를 안전하게 저장하고 복원하기 위해서
    - 사용자가 홈버튼을 누르거나 회전했을 때 onSaveInstanceState()를 이용해 상태 저장 → onRestoreInstanceState() 또는 onCreate()에서 복원해야 사용자가 **이탈 전 상태 그대로** 다시 사용할 수 있다.
- 사용자 경험을 지키기 위해서
    - 백그라운드로 나갔다가 다시 돌아올때 갑자기 앱이 죽거나 초기화 되면 사용자는 불편함을 느낄 수 있다.
- 앱 크래시와 버그를 방지하기 위해서
    - 아직 onCreate()가 끝나지 않앗는데 네트워크 요청을 해버리면 NPE나 illegalSateException이 발생할 수 있음

## onCreate()

- 액티비티가 실행되면 가장 먼저 호출된다.
- 화면 Layout정의, View생성, Databinidng 등은 이곳에 구현한다.
- 생명 주기를 통틀어서 단 한번만 수행되는 메서드이다.
- 따라서 Activity가 최초에 실행되어야 하는 작업을 수행하기에 적합하다.

```kotlin
override fun onCreate(savedInstanceState: Bundle?) {
    // Call the superclass onCreate to complete the creation of
    // the activity, like the view hierarchy.
    super.onCreate(savedInstanceState)

    // Set the user interface layout for this activity.
    // The layout is defined in the project res/layout/main_activity.xml file.
    setContentView(R.layout.main_activity)
}
```

## onStart()

- 화면에 표시되기 직전에 호출되는 곳으로, 화면에 진입할때 마다 실행되어야 하는 코드를 주로 이곳에 작성한다.
- 이 시점에서는 사용자와의 상호작용은 불가능하다.

## onResume()

- 액티비티가 화면에 완전히 떠서 사용자와의 상호작용이 가능한 상태이다.
- 음악 재생, 카메라 시작 같은 작업을 여기서 진행한다.
    - 버튼 클릭 이벤트, 실시간 데이터 갱신 등

## onPause()

- 다른 액티비티로 전환되거나, 팝업이 떠서 포커스를 잃을 떄 호출된다.
- 애니메이션 중단, 리소스 해제 등을 한다.

## onStop()

- 액티비티가 더이상 보이지 않을 때 호출된다. Ui와 관련된 작업 정리, 데이터 저장 등을 수행한다.


## onDestroy()

- 액티비티가 완전히 종료되기 직전에 호출된다. 메모리 해제, 리소시 정리 등 시스템에 의해 호출되기도 한다.
- finish()로 명시적으로 종료되거나, 시스템이 메모리 부족으로 제거할 때도 호출된다. 하지만, 반드시 호출된다는 보장은 없다.
